---
// src/pages/log/index.astro
import Layout from '../../layouts/Layout.astro'
import { getPosts } from '../../utils/getPosts.ts'

const logs = (await getCollection('log', ({ data }) => !data.draft))
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())

const fmt = new Intl.DateTimeFormat('zh-TW', {
  year: 'numeric', month: 'long', day: 'numeric', weekday: 'short'
})
---

<Layout title="更新日誌">
  <main style="max-width: 860px; margin: 0 auto; padding: 24px;">
    <h1>更新日誌</h1>
    {logs.length === 0 ? (
      <p class="muted">目前沒有日誌 (´-ω-`)</p>
    ) : (
      <ul class="list">
        {logs.map(p => (
          <li>
            <a href={`/log/${p.slug}`}>{p.data.title}</a>
            <span class="date">{fmt.format(p.data.date)}</span>
          </li>
        ))}
      </ul>
    )}
  </main>

  <style>
    .list { list-style: none; padding: 0; margin: 16px 0; display: grid; gap: 10px; }
    .list li { display: flex; justify-content: space-between; gap: 12px; border-bottom: 1px solid #eee; padding: 10px 0; }
    .list a { text-decoration: none; font-weight: 600; color: #222; }
    .list a:hover { text-decoration: underline; }
    .date { color: #666; font-size: .9rem; white-space: nowrap; }
    .muted { color: #666; }
  </style>
</Layout>
